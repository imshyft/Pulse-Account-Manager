<ui:ContentDialog x:Class="Studio.Dialogs.UpdateDetailsDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:local="clr-namespace:Studio.Dialogs"
    mc:Ignorable="d" 
    d:DesignHeight="450" d:DesignWidth="800"
    d:DataContext="{d:DesignInstance local:UpdateDetailsDialog}"
    Title="New Update Available">
    <ui:ContentDialog.Resources>
        <Style BasedOn="{StaticResource {x:Type ui:ContentDialog}}" TargetType="{x:Type local:UpdateDetailsDialog}"/>
    </ui:ContentDialog.Resources>
    <Grid
        MaxWidth="600">
        <StackPanel>
            <ui:TextBlock
                Text="The update has failed. Please try again later or make an issue if this keeps happening"
                Style="{StaticResource BodyTextStyle}"
                TextWrapping="Wrap"
                Margin="{StaticResource SmallLeftTopRightBottomMargin}" 
                TextAlignment="Center"
                Visibility="{Binding UpdateFailed, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            
            <ui:TextBlock
                Text="Please wait for the update to install. Once it is done, the application will be closed and has to be re-opened."
                Style="{StaticResource BodyTextStyle}"
                TextWrapping="Wrap"
                Margin="{StaticResource SmallLeftTopRightBottomMargin}" 
                TextAlignment="Center"
                Visibility="{Binding IsUpdating, Converter={StaticResource BooleanToVisibilityConverter}}"/>

            <ProgressBar
                IsIndeterminate="True"
                Margin="{StaticResource SmallLeftTopRightBottomMargin}"
                Visibility="{Binding IsUpdating, Converter={StaticResource BooleanToVisibilityConverter}}"/>

            <ui:Button
                Content="View on Github"
                HorizontalAlignment="Center"
                Command="{Binding OpenGithubReleases}"/>
            
            <FlowDocumentScrollViewer
                x:Name="txtChangeLog"/>
        </StackPanel>
    </Grid>
</ui:ContentDialog>
